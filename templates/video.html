{% extends "template.html" %}
{% block head %}
<link href="//vjs.zencdn.net/7.10.2/video-js.min.css" rel="stylesheet">
<script src="//vjs.zencdn.net/7.10.2/video.min.js"></script>
<script src="https://unpkg.com/@videojs/http-streaming/dist/videojs-http-streaming.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

<style>
    .grid-container {
        display: grid;
        grid-template-columns: auto auto auto;
        gap: 10px;
        padding: 10px;
        margin: auto;
        width: fit-content;
    }
</style>

{% endblock %}

{% block content %}

<div class="grid-container">
    {% for video in data %}
    <div class="grid-item">
        {% if video.isactive == 0 %}
            <img src="{{url_for('static', filename='empty.png')}}" />
        {% elif video.isactive == 1 %}
            <video-js id="{{video.stream}}" class="vjs-default-skin" controls autoplay muted preload width="640"
                height="360">
                <source src="{{video.source}}" type="application/x-mpegURL">
            </video-js>
            <script>
                var player = videojs('{{video.stream}}');
            </script>
        {% endif %}

        {% if video.isactive == 0 %}
            <form action="{{ url_for('play') }}" id="play" method="POST">
                <input type="hidden" name="video" value="{{video.stream}}">
                <input type="submit" value="Play">
            </form>
        {% elif video.isactive == 1 %}
            <form action="{{ url_for('stop') }}" id="stop" method="POST">
                <input type="hidden" name="video" value="{{video.stream}}">
                <input type="submit" value="Stop">
            </form>
        {% endif %}

        <form action="{{ url_for('restart') }}" id="restart" method="POST">
            <input type="hidden" name="video" value="{{video.stream}}">
            <input type="submit" value="Restart">
        </form>

        <form action="{{ url_for('estatisticas') }}" id="estatisticas" method="POST">
            <input type="hidden" name="video" value="{{video.stream}}">
            <input type="submit" value="EstatÃ­sticas">
        </form>

        <h4 align="center">{{video.name}}</h4>
    </div>
    {% endfor %}
</div>

{% endblock %}